# Template file for 'insomnia'
pkgname=insomnia
version=2021.2.0
revision=1
archs="x86_64"
hostmakedepends="tar xz"
depends="xdg-utils"
short_desc="API Client and Design Platform for GraphQL and REST"
maintainer="Brandon Martin <brandon@codedmart.com>"
license="MIT"
homepage="https://insomnia.rest"
distfiles="https://github.com/Kong/insomnia/releases/download/core@${version}/${pkgname}.Core-${version}.deb"
checksum=aa3ca967d6dbcd0495d9111c1d90e0427b9f9be5192068d04782b59be822e8ec
nopie=yes

do_extract() {
	ar x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}.Core-${version}.deb
	tar xf data.tar.xz
}

do_install() {
	vlicense usr/share/doc/insomnia/changelog.gz
	vinstall usr/share/applications/insomnia.desktop 644 usr/share/applications
	vcopy usr/share/icons usr/share/icons
	vcopy opt/Insomnia usr/lib
  mv ${DESTDIR}/usr/lib/Insomnia ${DESTDIR}/usr/lib/insomnia
	vmkdir usr/bin
	ln -s ../lib/insomnia/insomnia ${DESTDIR}/usr/bin/insomnia
}
