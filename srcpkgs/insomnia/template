# Template file for 'insomnia'
pkgname=insomnia
version=2021.2.2
revision=1
archs="x86_64"
hostmakedepends="tar xz"
depends="xdg-utils"
short_desc="API Client and Design Platform for GraphQL and REST"
maintainer="Brandon Martin <brandon@codedmart.com>"
license="MIT"
homepage="https://insomnia.rest"
distfiles="https://github.com/Kong/insomnia/releases/download/core@${version}/${pkgname}.Core-${version}.deb"
checksum=49c448472fefb9860b28b981245715319730bbfc6f69a385ac06dc2e8a9d735c
nopie=yes

do_extract() {
	ar x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}.Core-${version}.deb
	tar xf data.tar.xz
}

do_install() {
	vlicense usr/share/doc/insomnia/changelog.gz
	vinstall usr/share/applications/insomnia.desktop 644 usr/share/applications
	vcopy usr/share/icons usr/share/icons
	vcopy opt/Insomnia usr/lib
  mv ${DESTDIR}/usr/lib/Insomnia ${DESTDIR}/usr/lib/insomnia
	vmkdir usr/bin
	ln -s ../lib/insomnia/insomnia ${DESTDIR}/usr/bin/insomnia
}
